(this["webpackJsonpworkshop-2021"]=this["webpackJsonpworkshop-2021"]||[]).push([[0],{41:function(e,t,n){e.exports=n(62)},61:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),r=n(21),s=n.n(r),o=n(13);function l(e){var t=e.description,n=e.image;return a.a.createElement("div",{style:{width:170,height:300,background:"#A9A9A9",marginRight:50}},a.a.createElement("textarea",{value:t,style:{marginTop:10}}),a.a.createElement("img",{style:{width:140,marginRight:13,marginLeft:13,marginTop:10},src:n}))}n(39),n(30);var c=n(31),u=n(32),d=n(6),m=function(){function e(){var t=this;Object(c.a)(this,e),this.listTitle="",this.myData=[],this.list=[],this.suggestion=null,this.pseudo=function(e){t.listTitle=e},this.transfer=function(e){t.myData=e},this.download=function(e){var n=e.filter((function(e){return!e.suggested}));n.map((function(e){var n=e.votes.find((function(e){return e.pseudo===t.listTitle}));e.vote=n?n.vote:0})),t.list=n,t.suggestion=e.find((function(e){return e.suggested&&e.pseudo===t.listTitle}))}}return Object(u.a)(e,[{key:"data",get:function(){return this.list}}]),e}();Object(d.d)(m,{list:d.f,data:d.b});var g=new m,p=Object(i.createContext)(g);function f(e){e.data;return a.a.createElement("div",{className:"scroll"},a.a.createElement("div",{className:"liste scroll"},a.a.createElement(l,{image:"https://www.leparisien.fr/resizer/gdqi_4JFFkliiZPPncb_5oHzXAI=/932x582/cloudfront-eu-central-1.images.arcpublishing.com/lpguideshopping/G6AD3X2NPRHPTNBAIZMAC5OF6I.jpg",description:"La nouvelle s\xe9rie du seigneur des anneaux disponible maintenant sur amazon"}),a.a.createElement(l,{image:"https://fr.web.img4.acsta.net/pictures/22/02/03/16/28/1554715.jpg",description:"La nouvelle s\xe9rie du seigneur des anneaux disponible maintenant sur amazon"})))}var v,b,h,j,O=n(37),E=n(18),w=n(65),k=n(19),y=n(9),C=n(14),$=n(38),A=n(35),F=n(10),x=n(40),D=n(2),T=new x.a({uri:"https://adhoc-workshops.herokuapp.com/graphql"}),N=new A.a({uri:"wss://adhoc-workshops.herokuapp.com/graphql",options:{reconnect:!0}}),P=Object(F.d)((function(e){var t=e.query,n=Object(D.l)(t),i=n.kind,a=n.operation;return"OperationDefinition"===i&&"subscription"===a}),N,T),S=new C.a({link:P,cache:new $.a}),q=Object(w.a)(v||(v=Object(E.a)(['\n  query {\n    Place(id: "Wifilles-2021") {\n      Contents {\n        list\n        description\n        image\n        votes {\n          pseudo\n          vote\n        }\n        pseudo\n        suggested\n      }\n    }\n  }\n']))),I=Object(w.a)(b||(b=Object(E.a)(['\n  subscription {\n    newPlace(placeId: "Wifilles-2021") {\n      Contents {\n        list\n        description\n        image\n        votes {\n          pseudo\n          vote\n        }\n        pseudo\n        suggested\n      }\n    }\n  }\n']))),R=Object(w.a)(h||(h=Object(E.a)(['\n  mutation AddContent(\n    $list: String!\n    $pseudo: String!\n    $description: String!\n    $image: String!\n    $vote: Float!\n  ) {\n    addContent(\n      list: $list\n      pseudo: $pseudo\n      description: $description\n      image: $image\n      vote: $vote\n      place_id: "Wifilles-2021"\n    ) {\n      list\n    }\n  }\n']))),W=Object(w.a)(j||(j=Object(E.a)(['\n  mutation AddContent($list: String!) {\n    deleteContent(list: $list, place_id: "Wifilles-2021") {\n      list\n    }\n  }\n'])));function z(){var e,t=Object(i.useContext)(p),n=Object(k.b)(q).data,r=null===n||void 0===n||null===(e=n.Place)||void 0===e?void 0:e.Contents;return Object(i.useEffect)((function(){r&&t.download(r)}),[r]),a.a.createElement(a.a.Fragment,null)}function L(){var e,t=Object(i.useContext)(p),n=Object(k.c)(I).data,r=null===n||void 0===n||null===(e=n.newPlace)||void 0===e?void 0:e.Contents;return Object(i.useEffect)((function(){r&&t.download(r)}),[r]),a.a.createElement(a.a.Fragment,null)}function M(){var e=Object(i.useContext)(p),t=Object(i.useState)(),n=Object(o.a)(t,2),r=n[0],s=n[1],l=Object(k.a)(R),c=Object(o.a)(l,1)[0],u=Object(k.a)(W),d=Object(o.a)(u,1)[0];return Object(i.useEffect)((function(){s(e.listTitle)}),[e.listTitle]),a.a.createElement("div",{className:"navbar"},r&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h4",{style:{color:"#5F9EA0",background:"#FFF",minWidth:200,borderRadius:5,padding:4,marginRight:12}},r),a.a.createElement("button",{className:"send",onClick:function(){if(e.myData.length){var t,n=e.myData.filter((function(e){var t,n;return(null===(t=e.description)||void 0===t?void 0:t.length)&&(null===(n=e.image)||void 0===n?void 0:n.length)}));(null===e||void 0===e||null===(t=e.myData)||void 0===t?void 0:t.length)===n.length?e.myData.forEach((function(e,t){return c({variables:{list:e.list?e.list:r,pseudo:r,description:e.description,image:e.image,vote:e.vote?e.vote:0}})})):alert('Merci de v\xe9rifier si les Donn\xe9es contiennent bien : "description" et "image" !')}else alert("Merci de transf\xe9rer d'abord des Donn\xe9es !")}},"Envoyer"),a.a.createElement("button",{className:"delete",onClick:function(){r?d({variables:{list:r}}):alert("Merci d'entrer d'abord votre ListTitle !")}},"Effacer")))}var _=function(){return a.a.createElement(y.a,{client:S},a.a.createElement(z,null),a.a.createElement(L,null),a.a.createElement(M,null))},J=Object(O.a)((function(){var e=Object(i.useContext)(p),t=Object(i.useState)(e),n=Object(o.a)(t,2),r=n[0],s=n[1];return Object(i.useEffect)((function(){s(e)}),[e.list]),a.a.createElement("div",{className:"scroll",style:{overflow:"auto",height:"100vh"}},a.a.createElement(_,null),a.a.createElement("div",{className:"App"},a.a.createElement(f,{data:r})))}));n(61);s.a.render(a.a.createElement(J,null),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.012cb229.chunk.js.map